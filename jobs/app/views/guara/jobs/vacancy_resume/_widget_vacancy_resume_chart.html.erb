<%= javascript_include_tag "flot/jquery.flot", "flot/jquery.flot.pie" %>

<div id="vacancies_overview" style="width:600px;height:300px"></div>
<script language="javascript">
	function labelFormatter(label, series) {
		return "<div style='font-size:8pt; text-align:center; padding:2px; color:white;font-weigth:bold;'>" + label + "<br/>" + Math.round(series.percent) + "%</div>";
	}

	$.plot('#vacancies_overview', 
        [
            {
                label: "<b>Outros: <%=@vacancy2 - @vacancy %></b>",
                data: <%=@vacancy2 - @vacancy%>
            },
            {
                label: "<b>Total: <%=@vacancy%></b>",
                data: <%=@vacancy%>
            }
        ], 
        {
            series: {
                pie: {
                    show: true,
                    radius: 1,
                    label: {
                        show: true,
                        radius: 3/4,
                        formatter: labelFormatter,
                        background: {
                            opacity: 0.5,
                            color: '#000'
                        }
                    }
                }
            },
            legend: {
                show: false
            }
    });
</script>