<% if @contacts %>
<section id="buttons">
<%
 inputs = {
						:name => {},
						:phone => {},
 					}
%>
<%= semantic_form_for @customer, :url => edit_index_customer_contacts_path(@customer) do |f| %>
	<%= f.semantic_fields_for :contacts do |flds_builder, i| %>
	  <%= render 'active_extend/one_to_many_inputs_fields_grid', f: flds_builder, inputs: inputs %>
	<% end %>

	<%= link_to_add_fields "add", f, :contacts, local_assigns[:options] do |builder| %>
		<%= render 'active_extend/one_to_many_inputs_fields_grid', f: builder, inputs: inputs %>
	<% end  %>
	
<% end %>

  <legend><%= t("search.results")%></legend>
  
  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th><%= t("contacts.name") %></th>
        <th><%= t("contacts.department") %></th>
        <th><%= t("contacts.business_function") %></th>
        <th><%= t("contacts.phone") %></th>
        <th><%= t("contacts.cell") %></th>
        <th><%= t("contacts.emails") %></th>
        <th><%= t("helpers.forms.actions") %></th>
      </tr>
    </thead>
    <tbody>
    <% @contacts.each do |contact| %>
      <tr>
      <td><%= contact.name %></td>
      <td><%= name_or_empty contact.department %></td>
      <td><%= contact.business_function %></td>
      <td><%= contact.phone %></td>
      <td><%= contact.cell %></td>
      <td><%= concat_emails(contact.emails) %></td>
      <td></td>
      <td><%= link_to t('helpers.forms.show'), [contact.customer, contact] %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</section>

<% end %>

<br />

